var Or=Object.create;var fe=Object.defineProperty;var Ar=Object.getOwnPropertyDescriptor;var xr=Object.getOwnPropertyNames;var Ir=Object.getPrototypeOf,Rr=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Mr=(t,e)=>{for(var i in e)fe(t,i,{get:e[i],enumerable:!0})},mt=(t,e,i,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of xr(e))!Rr.call(t,n)&&n!==i&&fe(t,n,{get:()=>e[n],enumerable:!(u=Ar(e,n))||u.enumerable});return t};var qe=(t,e,i)=>(i=t!=null?Or(Ir(t)):{},mt(e||!t||!t.__esModule?fe(i,"default",{value:t,enumerable:!0}):i,t)),Tr=t=>mt(fe({},"__esModule",{value:!0}),t);var ht=_(Be=>{var pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Be.encode=function(t){if(0<=t&&t<pt.length)return pt[t];throw new TypeError("Must be between 0 and 63: "+t)};Be.decode=function(t){var e=65,i=90,u=97,n=122,r=48,o=57,s=43,a=47,c=26,l=52;return e<=t&&t<=i?t-e:u<=t&&t<=n?t-u+c:r<=t&&t<=o?t-r+l:t==s?62:t==a?63:-1}});var Ge=_(Ue=>{var gt=ht(),ke=5,vt=1<<ke,_t=vt-1,yt=vt;function Lr(t){return t<0?(-t<<1)+1:(t<<1)+0}function Dr(t){var e=(t&1)===1,i=t>>1;return e?-i:i}Ue.encode=function(e){var i="",u,n=Lr(e);do u=n&_t,n>>>=ke,n>0&&(u|=yt),i+=gt.encode(u);while(n>0);return i};Ue.decode=function(e,i,u){var n=e.length,r=0,o=0,s,a;do{if(i>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(a=gt.decode(e.charCodeAt(i++)),a===-1)throw new Error("Invalid base64 digit: "+e.charAt(i-1));s=!!(a&yt),a&=_t,r=r+(a<<o),o+=ke}while(s);u.value=Dr(r),u.rest=i}});var J=_(O=>{function Nr(t,e,i){if(e in t)return t[e];if(arguments.length===3)return i;throw new Error('"'+e+'" is a required argument.')}O.getArg=Nr;var Et=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Pr=/^data:.+\,.+$/;function te(t){var e=t.match(Et);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}O.urlParse=te;function $(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}O.urlGenerate=$;function Fe(t){var e=t,i=te(t);if(i){if(!i.path)return t;e=i.path}for(var u=O.isAbsolute(e),n=e.split(/\/+/),r,o=0,s=n.length-1;s>=0;s--)r=n[s],r==="."?n.splice(s,1):r===".."?o++:o>0&&(r===""?(n.splice(s+1,o),o=0):(n.splice(s,2),o--));return e=n.join("/"),e===""&&(e=u?"/":"."),i?(i.path=e,$(i)):e}O.normalize=Fe;function St(t,e){t===""&&(t="."),e===""&&(e=".");var i=te(e),u=te(t);if(u&&(t=u.path||"/"),i&&!i.scheme)return u&&(i.scheme=u.scheme),$(i);if(i||e.match(Pr))return e;if(u&&!u.host&&!u.path)return u.host=e,$(u);var n=e.charAt(0)==="/"?e:Fe(t.replace(/\/+$/,"")+"/"+e);return u?(u.path=n,$(u)):n}O.join=St;O.isAbsolute=function(t){return t.charAt(0)==="/"||Et.test(t)};function qr(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var i=0;e.indexOf(t+"/")!==0;){var u=t.lastIndexOf("/");if(u<0||(t=t.slice(0,u),t.match(/^([^\/]+:\/)?\/*$/)))return e;++i}return Array(i+1).join("../")+e.substr(t.length+1)}O.relative=qr;var wt=function(){var t=Object.create(null);return!("__proto__"in t)}();function bt(t){return t}function Br(t){return Ct(t)?"$"+t:t}O.toSetString=wt?bt:Br;function kr(t){return Ct(t)?t.slice(1):t}O.fromSetString=wt?bt:kr;function Ct(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var i=e-10;i>=0;i--)if(t.charCodeAt(i)!==36)return!1;return!0}function Ur(t,e,i){var u=H(t.source,e.source);return u!==0||(u=t.originalLine-e.originalLine,u!==0)||(u=t.originalColumn-e.originalColumn,u!==0||i)||(u=t.generatedColumn-e.generatedColumn,u!==0)||(u=t.generatedLine-e.generatedLine,u!==0)?u:H(t.name,e.name)}O.compareByOriginalPositions=Ur;function Gr(t,e,i){var u=t.generatedLine-e.generatedLine;return u!==0||(u=t.generatedColumn-e.generatedColumn,u!==0||i)||(u=H(t.source,e.source),u!==0)||(u=t.originalLine-e.originalLine,u!==0)||(u=t.originalColumn-e.originalColumn,u!==0)?u:H(t.name,e.name)}O.compareByGeneratedPositionsDeflated=Gr;function H(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Fr(t,e){var i=t.generatedLine-e.generatedLine;return i!==0||(i=t.generatedColumn-e.generatedColumn,i!==0)||(i=H(t.source,e.source),i!==0)||(i=t.originalLine-e.originalLine,i!==0)||(i=t.originalColumn-e.originalColumn,i!==0)?i:H(t.name,e.name)}O.compareByGeneratedPositionsInflated=Fr;function Vr(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}O.parseSourceMapInput=Vr;function Qr(t,e,i){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),i){var u=te(i);if(!u)throw new Error("sourceMapURL could not be parsed");if(u.path){var n=u.path.lastIndexOf("/");n>=0&&(u.path=u.path.substring(0,n+1))}e=St($(u),e)}return Fe(e)}O.computeSourceURL=Qr});var Ke=_(Ot=>{var Ve=J(),Qe=Object.prototype.hasOwnProperty,V=typeof Map<"u";function k(){this._array=[],this._set=V?new Map:Object.create(null)}k.fromArray=function(e,i){for(var u=new k,n=0,r=e.length;n<r;n++)u.add(e[n],i);return u};k.prototype.size=function(){return V?this._set.size:Object.getOwnPropertyNames(this._set).length};k.prototype.add=function(e,i){var u=V?e:Ve.toSetString(e),n=V?this.has(e):Qe.call(this._set,u),r=this._array.length;(!n||i)&&this._array.push(e),n||(V?this._set.set(e,r):this._set[u]=r)};k.prototype.has=function(e){if(V)return this._set.has(e);var i=Ve.toSetString(e);return Qe.call(this._set,i)};k.prototype.indexOf=function(e){if(V){var i=this._set.get(e);if(i>=0)return i}else{var u=Ve.toSetString(e);if(Qe.call(this._set,u))return this._set[u]}throw new Error('"'+e+'" is not in the set.')};k.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};k.prototype.toArray=function(){return this._array.slice()};Ot.ArraySet=k});var It=_(xt=>{var At=J();function Kr(t,e){var i=t.generatedLine,u=e.generatedLine,n=t.generatedColumn,r=e.generatedColumn;return u>i||u==i&&r>=n||At.compareByGeneratedPositionsInflated(t,e)<=0}function de(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}de.prototype.unsortedForEach=function(e,i){this._array.forEach(e,i)};de.prototype.add=function(e){Kr(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};de.prototype.toArray=function(){return this._sorted||(this._array.sort(At.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};xt.MappingList=de});var ze=_(Rt=>{var re=Ge(),E=J(),me=Ke().ArraySet,zr=It().MappingList;function R(t){t||(t={}),this._file=E.getArg(t,"file",null),this._sourceRoot=E.getArg(t,"sourceRoot",null),this._skipValidation=E.getArg(t,"skipValidation",!1),this._sources=new me,this._names=new me,this._mappings=new zr,this._sourcesContents=null}R.prototype._version=3;R.fromSourceMap=function(e){var i=e.sourceRoot,u=new R({file:e.file,sourceRoot:i});return e.eachMapping(function(n){var r={generated:{line:n.generatedLine,column:n.generatedColumn}};n.source!=null&&(r.source=n.source,i!=null&&(r.source=E.relative(i,r.source)),r.original={line:n.originalLine,column:n.originalColumn},n.name!=null&&(r.name=n.name)),u.addMapping(r)}),e.sources.forEach(function(n){var r=n;i!==null&&(r=E.relative(i,n)),u._sources.has(r)||u._sources.add(r);var o=e.sourceContentFor(n);o!=null&&u.setSourceContent(n,o)}),u};R.prototype.addMapping=function(e){var i=E.getArg(e,"generated"),u=E.getArg(e,"original",null),n=E.getArg(e,"source",null),r=E.getArg(e,"name",null);this._skipValidation||this._validateMapping(i,u,n,r),n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),r!=null&&(r=String(r),this._names.has(r)||this._names.add(r)),this._mappings.add({generatedLine:i.line,generatedColumn:i.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:n,name:r})};R.prototype.setSourceContent=function(e,i){var u=e;this._sourceRoot!=null&&(u=E.relative(this._sourceRoot,u)),i!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[E.toSetString(u)]=i):this._sourcesContents&&(delete this._sourcesContents[E.toSetString(u)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};R.prototype.applySourceMap=function(e,i,u){var n=i;if(i==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=e.file}var r=this._sourceRoot;r!=null&&(n=E.relative(r,n));var o=new me,s=new me;this._mappings.unsortedForEach(function(a){if(a.source===n&&a.originalLine!=null){var c=e.originalPositionFor({line:a.originalLine,column:a.originalColumn});c.source!=null&&(a.source=c.source,u!=null&&(a.source=E.join(u,a.source)),r!=null&&(a.source=E.relative(r,a.source)),a.originalLine=c.line,a.originalColumn=c.column,c.name!=null&&(a.name=c.name))}var l=a.source;l!=null&&!o.has(l)&&o.add(l);var d=a.name;d!=null&&!s.has(d)&&s.add(d)},this),this._sources=o,this._names=s,e.sources.forEach(function(a){var c=e.sourceContentFor(a);c!=null&&(u!=null&&(a=E.join(u,a)),r!=null&&(a=E.relative(r,a)),this.setSourceContent(a,c))},this)};R.prototype._validateMapping=function(e,i,u,n){if(i&&typeof i.line!="number"&&typeof i.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!i&&!u&&!n)){if(e&&"line"in e&&"column"in e&&i&&"line"in i&&"column"in i&&e.line>0&&e.column>=0&&i.line>0&&i.column>=0&&u)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:u,original:i,name:n}))}};R.prototype._serializeMappings=function(){for(var e=0,i=1,u=0,n=0,r=0,o=0,s="",a,c,l,d,f=this._mappings.toArray(),m=0,h=f.length;m<h;m++){if(c=f[m],a="",c.generatedLine!==i)for(e=0;c.generatedLine!==i;)a+=";",i++;else if(m>0){if(!E.compareByGeneratedPositionsInflated(c,f[m-1]))continue;a+=","}a+=re.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),a+=re.encode(d-o),o=d,a+=re.encode(c.originalLine-1-n),n=c.originalLine-1,a+=re.encode(c.originalColumn-u),u=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),a+=re.encode(l-r),r=l)),s+=a}return s};R.prototype._generateSourcesContent=function(e,i){return e.map(function(u){if(!this._sourcesContents)return null;i!=null&&(u=E.relative(i,u));var n=E.toSetString(u);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)};R.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};R.prototype.toString=function(){return JSON.stringify(this.toJSON())};Rt.SourceMapGenerator=R});var Mt=_(Q=>{Q.GREATEST_LOWER_BOUND=1;Q.LEAST_UPPER_BOUND=2;function We(t,e,i,u,n,r){var o=Math.floor((e-t)/2)+t,s=n(i,u[o],!0);return s===0?o:s>0?e-o>1?We(o,e,i,u,n,r):r==Q.LEAST_UPPER_BOUND?e<u.length?e:-1:o:o-t>1?We(t,o,i,u,n,r):r==Q.LEAST_UPPER_BOUND?o:t<0?-1:t}Q.search=function(e,i,u,n){if(i.length===0)return-1;var r=We(-1,i.length,e,i,u,n||Q.GREATEST_LOWER_BOUND);if(r<0)return-1;for(;r-1>=0&&u(i[r],i[r-1],!0)===0;)--r;return r}});var Lt=_(Tt=>{function je(t,e,i){var u=t[e];t[e]=t[i],t[i]=u}function Wr(t,e){return Math.round(t+Math.random()*(e-t))}function $e(t,e,i,u){if(i<u){var n=Wr(i,u),r=i-1;je(t,n,u);for(var o=t[u],s=i;s<u;s++)e(t[s],o)<=0&&(r+=1,je(t,r,s));je(t,r+1,s);var a=r+1;$e(t,e,i,a-1),$e(t,e,a+1,u)}}Tt.quickSort=function(t,e){$e(t,e,0,t.length-1)}});var Nt=_(pe=>{var p=J(),He=Mt(),X=Ke().ArraySet,jr=Ge(),ne=Lt().quickSort;function y(t,e){var i=t;return typeof t=="string"&&(i=p.parseSourceMapInput(t)),i.sections!=null?new L(i,e):new b(i,e)}y.fromSourceMap=function(t,e){return b.fromSourceMap(t,e)};y.prototype._version=3;y.prototype.__generatedMappings=null;Object.defineProperty(y.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});y.prototype.__originalMappings=null;Object.defineProperty(y.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});y.prototype._charIsMappingSeparator=function(e,i){var u=e.charAt(i);return u===";"||u===","};y.prototype._parseMappings=function(e,i){throw new Error("Subclasses must implement _parseMappings")};y.GENERATED_ORDER=1;y.ORIGINAL_ORDER=2;y.GREATEST_LOWER_BOUND=1;y.LEAST_UPPER_BOUND=2;y.prototype.eachMapping=function(e,i,u){var n=i||null,r=u||y.GENERATED_ORDER,o;switch(r){case y.GENERATED_ORDER:o=this._generatedMappings;break;case y.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map(function(a){var c=a.source===null?null:this._sources.at(a.source);return c=p.computeSourceURL(s,c,this._sourceMapURL),{source:c,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(e,n)};y.prototype.allGeneratedPositionsFor=function(e){var i=p.getArg(e,"line"),u={source:p.getArg(e,"source"),originalLine:i,originalColumn:p.getArg(e,"column",0)};if(u.source=this._findSourceIndex(u.source),u.source<0)return[];var n=[],r=this._findMapping(u,this._originalMappings,"originalLine","originalColumn",p.compareByOriginalPositions,He.LEAST_UPPER_BOUND);if(r>=0){var o=this._originalMappings[r];if(e.column===void 0)for(var s=o.originalLine;o&&o.originalLine===s;)n.push({line:p.getArg(o,"generatedLine",null),column:p.getArg(o,"generatedColumn",null),lastColumn:p.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++r];else for(var a=o.originalColumn;o&&o.originalLine===i&&o.originalColumn==a;)n.push({line:p.getArg(o,"generatedLine",null),column:p.getArg(o,"generatedColumn",null),lastColumn:p.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++r]}return n};pe.SourceMapConsumer=y;function b(t,e){var i=t;typeof t=="string"&&(i=p.parseSourceMapInput(t));var u=p.getArg(i,"version"),n=p.getArg(i,"sources"),r=p.getArg(i,"names",[]),o=p.getArg(i,"sourceRoot",null),s=p.getArg(i,"sourcesContent",null),a=p.getArg(i,"mappings"),c=p.getArg(i,"file",null);if(u!=this._version)throw new Error("Unsupported version: "+u);o&&(o=p.normalize(o)),n=n.map(String).map(p.normalize).map(function(l){return o&&p.isAbsolute(o)&&p.isAbsolute(l)?p.relative(o,l):l}),this._names=X.fromArray(r.map(String),!0),this._sources=X.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(l){return p.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=s,this._mappings=a,this._sourceMapURL=e,this.file=c}b.prototype=Object.create(y.prototype);b.prototype.consumer=y;b.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=p.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var i;for(i=0;i<this._absoluteSources.length;++i)if(this._absoluteSources[i]==t)return i;return-1};b.fromSourceMap=function(e,i){var u=Object.create(b.prototype),n=u._names=X.fromArray(e._names.toArray(),!0),r=u._sources=X.fromArray(e._sources.toArray(),!0);u.sourceRoot=e._sourceRoot,u.sourcesContent=e._generateSourcesContent(u._sources.toArray(),u.sourceRoot),u.file=e._file,u._sourceMapURL=i,u._absoluteSources=u._sources.toArray().map(function(m){return p.computeSourceURL(u.sourceRoot,m,i)});for(var o=e._mappings.toArray().slice(),s=u.__generatedMappings=[],a=u.__originalMappings=[],c=0,l=o.length;c<l;c++){var d=o[c],f=new Dt;f.generatedLine=d.generatedLine,f.generatedColumn=d.generatedColumn,d.source&&(f.source=r.indexOf(d.source),f.originalLine=d.originalLine,f.originalColumn=d.originalColumn,d.name&&(f.name=n.indexOf(d.name)),a.push(f)),s.push(f)}return ne(u.__originalMappings,p.compareByOriginalPositions),u};b.prototype._version=3;Object.defineProperty(b.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Dt(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}b.prototype._parseMappings=function(e,i){for(var u=1,n=0,r=0,o=0,s=0,a=0,c=e.length,l=0,d={},f={},m=[],h=[],v,B,S,w,x;l<c;)if(e.charAt(l)===";")u++,l++,n=0;else if(e.charAt(l)===",")l++;else{for(v=new Dt,v.generatedLine=u,w=l;w<c&&!this._charIsMappingSeparator(e,w);w++);if(B=e.slice(l,w),S=d[B],S)l+=B.length;else{for(S=[];l<w;)jr.decode(e,l,f),x=f.value,l=f.rest,S.push(x);if(S.length===2)throw new Error("Found a source, but no line and column");if(S.length===3)throw new Error("Found a source and line, but no column");d[B]=S}v.generatedColumn=n+S[0],n=v.generatedColumn,S.length>1&&(v.source=s+S[1],s+=S[1],v.originalLine=r+S[2],r=v.originalLine,v.originalLine+=1,v.originalColumn=o+S[3],o=v.originalColumn,S.length>4&&(v.name=a+S[4],a+=S[4])),h.push(v),typeof v.originalLine=="number"&&m.push(v)}ne(h,p.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,ne(m,p.compareByOriginalPositions),this.__originalMappings=m};b.prototype._findMapping=function(e,i,u,n,r,o){if(e[u]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[u]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return He.search(e,i,r,o)};b.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var i=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(i.generatedLine===u.generatedLine){i.lastGeneratedColumn=u.generatedColumn-1;continue}}i.lastGeneratedColumn=1/0}};b.prototype.originalPositionFor=function(e){var i={generatedLine:p.getArg(e,"line"),generatedColumn:p.getArg(e,"column")},u=this._findMapping(i,this._generatedMappings,"generatedLine","generatedColumn",p.compareByGeneratedPositionsDeflated,p.getArg(e,"bias",y.GREATEST_LOWER_BOUND));if(u>=0){var n=this._generatedMappings[u];if(n.generatedLine===i.generatedLine){var r=p.getArg(n,"source",null);r!==null&&(r=this._sources.at(r),r=p.computeSourceURL(this.sourceRoot,r,this._sourceMapURL));var o=p.getArg(n,"name",null);return o!==null&&(o=this._names.at(o)),{source:r,line:p.getArg(n,"originalLine",null),column:p.getArg(n,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};b.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};b.prototype.sourceContentFor=function(e,i){if(!this.sourcesContent)return null;var u=this._findSourceIndex(e);if(u>=0)return this.sourcesContent[u];var n=e;this.sourceRoot!=null&&(n=p.relative(this.sourceRoot,n));var r;if(this.sourceRoot!=null&&(r=p.urlParse(this.sourceRoot))){var o=n.replace(/^file:\/\//,"");if(r.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!r.path||r.path=="/")&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(i)return null;throw new Error('"'+n+'" is not in the SourceMap.')};b.prototype.generatedPositionFor=function(e){var i=p.getArg(e,"source");if(i=this._findSourceIndex(i),i<0)return{line:null,column:null,lastColumn:null};var u={source:i,originalLine:p.getArg(e,"line"),originalColumn:p.getArg(e,"column")},n=this._findMapping(u,this._originalMappings,"originalLine","originalColumn",p.compareByOriginalPositions,p.getArg(e,"bias",y.GREATEST_LOWER_BOUND));if(n>=0){var r=this._originalMappings[n];if(r.source===u.source)return{line:p.getArg(r,"generatedLine",null),column:p.getArg(r,"generatedColumn",null),lastColumn:p.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};pe.BasicSourceMapConsumer=b;function L(t,e){var i=t;typeof t=="string"&&(i=p.parseSourceMapInput(t));var u=p.getArg(i,"version"),n=p.getArg(i,"sections");if(u!=this._version)throw new Error("Unsupported version: "+u);this._sources=new X,this._names=new X;var r={line:-1,column:0};this._sections=n.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var s=p.getArg(o,"offset"),a=p.getArg(s,"line"),c=p.getArg(s,"column");if(a<r.line||a===r.line&&c<r.column)throw new Error("Section offsets must be ordered and non-overlapping.");return r=s,{generatedOffset:{generatedLine:a+1,generatedColumn:c+1},consumer:new y(p.getArg(o,"map"),e)}})}L.prototype=Object.create(y.prototype);L.prototype.constructor=y;L.prototype._version=3;Object.defineProperty(L.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var i=0;i<this._sections[e].consumer.sources.length;i++)t.push(this._sections[e].consumer.sources[i]);return t}});L.prototype.originalPositionFor=function(e){var i={generatedLine:p.getArg(e,"line"),generatedColumn:p.getArg(e,"column")},u=He.search(i,this._sections,function(r,o){var s=r.generatedLine-o.generatedOffset.generatedLine;return s||r.generatedColumn-o.generatedOffset.generatedColumn}),n=this._sections[u];return n?n.consumer.originalPositionFor({line:i.generatedLine-(n.generatedOffset.generatedLine-1),column:i.generatedColumn-(n.generatedOffset.generatedLine===i.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};L.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};L.prototype.sourceContentFor=function(e,i){for(var u=0;u<this._sections.length;u++){var n=this._sections[u],r=n.consumer.sourceContentFor(e,!0);if(r)return r}if(i)return null;throw new Error('"'+e+'" is not in the SourceMap.')};L.prototype.generatedPositionFor=function(e){for(var i=0;i<this._sections.length;i++){var u=this._sections[i];if(u.consumer._findSourceIndex(p.getArg(e,"source"))!==-1){var n=u.consumer.generatedPositionFor(e);if(n){var r={line:n.line+(u.generatedOffset.generatedLine-1),column:n.column+(u.generatedOffset.generatedLine===n.line?u.generatedOffset.generatedColumn-1:0)};return r}}}return{line:null,column:null}};L.prototype._parseMappings=function(e,i){this.__generatedMappings=[],this.__originalMappings=[];for(var u=0;u<this._sections.length;u++)for(var n=this._sections[u],r=n.consumer._generatedMappings,o=0;o<r.length;o++){var s=r[o],a=n.consumer._sources.at(s.source);a=p.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var c=null;s.name&&(c=n.consumer._names.at(s.name),this._names.add(c),c=this._names.indexOf(c));var l={source:a,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}ne(this.__generatedMappings,p.compareByGeneratedPositionsDeflated),ne(this.__originalMappings,p.compareByOriginalPositions)};pe.IndexedSourceMapConsumer=L});var qt=_(Pt=>{var $r=ze().SourceMapGenerator,he=J(),Hr=/(\r?\n)/,Jr=10,Z="$$$isSourceNode$$$";function I(t,e,i,u,n){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=i??null,this.name=n??null,this[Z]=!0,u!=null&&this.add(u)}I.fromStringWithSourceMap=function(e,i,u){var n=new I,r=e.split(Hr),o=0,s=function(){var f=h(),m=h()||"";return f+m;function h(){return o<r.length?r[o++]:void 0}},a=1,c=0,l=null;return i.eachMapping(function(f){if(l!==null)if(a<f.generatedLine)d(l,s()),a++,c=0;else{var m=r[o]||"",h=m.substr(0,f.generatedColumn-c);r[o]=m.substr(f.generatedColumn-c),c=f.generatedColumn,d(l,h),l=f;return}for(;a<f.generatedLine;)n.add(s()),a++;if(c<f.generatedColumn){var m=r[o]||"";n.add(m.substr(0,f.generatedColumn)),r[o]=m.substr(f.generatedColumn),c=f.generatedColumn}l=f},this),o<r.length&&(l&&d(l,s()),n.add(r.splice(o).join(""))),i.sources.forEach(function(f){var m=i.sourceContentFor(f);m!=null&&(u!=null&&(f=he.join(u,f)),n.setSourceContent(f,m))}),n;function d(f,m){if(f===null||f.source===void 0)n.add(m);else{var h=u?he.join(u,f.source):f.source;n.add(new I(f.originalLine,f.originalColumn,h,m,f.name))}}};I.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(i){this.add(i)},this);else if(e[Z]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};I.prototype.prepend=function(e){if(Array.isArray(e))for(var i=e.length-1;i>=0;i--)this.prepend(e[i]);else if(e[Z]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};I.prototype.walk=function(e){for(var i,u=0,n=this.children.length;u<n;u++)i=this.children[u],i[Z]?i.walk(e):i!==""&&e(i,{source:this.source,line:this.line,column:this.column,name:this.name})};I.prototype.join=function(e){var i,u,n=this.children.length;if(n>0){for(i=[],u=0;u<n-1;u++)i.push(this.children[u]),i.push(e);i.push(this.children[u]),this.children=i}return this};I.prototype.replaceRight=function(e,i){var u=this.children[this.children.length-1];return u[Z]?u.replaceRight(e,i):typeof u=="string"?this.children[this.children.length-1]=u.replace(e,i):this.children.push("".replace(e,i)),this};I.prototype.setSourceContent=function(e,i){this.sourceContents[he.toSetString(e)]=i};I.prototype.walkSourceContents=function(e){for(var i=0,u=this.children.length;i<u;i++)this.children[i][Z]&&this.children[i].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),i=0,u=n.length;i<u;i++)e(he.fromSetString(n[i]),this.sourceContents[n[i]])};I.prototype.toString=function(){var e="";return this.walk(function(i){e+=i}),e};I.prototype.toStringWithSourceMap=function(e){var i={code:"",line:1,column:0},u=new $r(e),n=!1,r=null,o=null,s=null,a=null;return this.walk(function(c,l){i.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((r!==l.source||o!==l.line||s!==l.column||a!==l.name)&&u.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:i.line,column:i.column},name:l.name}),r=l.source,o=l.line,s=l.column,a=l.name,n=!0):n&&(u.addMapping({generated:{line:i.line,column:i.column}}),r=null,n=!1);for(var d=0,f=c.length;d<f;d++)c.charCodeAt(d)===Jr?(i.line++,i.column=0,d+1===f?(r=null,n=!1):n&&u.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:i.line,column:i.column},name:l.name})):i.column++}),this.walkSourceContents(function(c,l){u.setSourceContent(c,l)}),{code:i.code,map:u}};Pt.SourceNode=I});var Bt=_(ge=>{ge.SourceMapGenerator=ze().SourceMapGenerator;ge.SourceMapConsumer=Nt().SourceMapConsumer;ge.SourceNode=qt().SourceNode});var Ut=_((Wi,kt)=>{var Xr=Object.prototype.toString,Je=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Zr(t){return Xr.call(t).slice(8,-1)==="ArrayBuffer"}function Yr(t,e,i){e>>>=0;var u=t.byteLength-e;if(u<0)throw new RangeError("'offset' is out of bounds");if(i===void 0)i=u;else if(i>>>=0,i>u)throw new RangeError("'length' is out of bounds");return Je?Buffer.from(t.slice(e,e+i)):new Buffer(new Uint8Array(t.slice(e,e+i)))}function en(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Je?Buffer.from(t,e):new Buffer(t,e)}function tn(t,e,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Zr(t)?Yr(t,e,i):typeof t=="string"?en(t,e):Je?Buffer.from(t):new Buffer(t)}kt.exports=tn});var jt=_((z,et)=>{var rn=Bt().SourceMapConsumer,Xe=require("path"),N;try{N=require("fs"),(!N.existsSync||!N.readFileSync)&&(N=null)}catch{}var nn=Ut();function Gt(t,e){return t.require(e)}var Ft=!1,Vt=!1,Ze=!1,ie="auto",K={},oe={},on=/^data:application\/json[^,]+base64,/,G=[],F=[];function tt(){return ie==="browser"?!0:ie==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function un(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function sn(){return typeof process=="object"&&process!==null?process.version:""}function an(){if(typeof process=="object"&&process!==null)return process.stderr}function ln(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function ve(t){return function(e){for(var i=0;i<t.length;i++){var u=t[i](e);if(u)return u}return null}}var rt=ve(G);G.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(u,n){return n?"":"/"})),t in K)return K[t];var e="";try{if(N)N.existsSync(t)&&(e=N.readFileSync(t,"utf8"));else{var i=new XMLHttpRequest;i.open("GET",t,!1),i.send(null),i.readyState===4&&i.status===200&&(e=i.responseText)}}catch{}return K[t]=e});function Ye(t,e){if(!t)return e;var i=Xe.dirname(t),u=/^\w+:\/\/[^\/]*/.exec(i),n=u?u[0]:"",r=i.slice(n.length);return n&&/^\/\w\:/.test(r)?(n+="/",n+Xe.resolve(i.slice(n.length),e).replace(/\\/g,"/")):n+Xe.resolve(i.slice(n.length),e)}function cn(t){var e;if(tt())try{var i=new XMLHttpRequest;i.open("GET",t,!1),i.send(null),e=i.readyState===4?i.responseText:null;var u=i.getResponseHeader("SourceMap")||i.getResponseHeader("X-SourceMap");if(u)return u}catch{}e=rt(t);for(var n=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,r,o;o=n.exec(e);)r=o;return r?r[1]:null}var nt=ve(F);F.push(function(t){var e=cn(t);if(!e)return null;var i;if(on.test(e)){var u=e.slice(e.indexOf(",")+1);i=nn(u,"base64").toString(),e=t}else e=Ye(t,e),i=rt(e);return i?{url:e,map:i}:null});function it(t){var e=oe[t.source];if(!e){var i=nt(t.source);i?(e=oe[t.source]={url:i.url,map:new rn(i.map)},e.map.sourcesContent&&e.map.sources.forEach(function(n,r){var o=e.map.sourcesContent[r];if(o){var s=Ye(e.url,n);K[s]=o}})):e=oe[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var u=e.map.originalPositionFor(t);if(u.source!==null)return u.source=Ye(e.url,u.source),u}return t}function Kt(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var i=it({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+i.source+":"+i.line+":"+(i.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Kt(e[2])+")":t}function fn(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var i=this.getLineNumber();if(i!=null){e+=":"+i;var u=this.getColumnNumber();u&&(e+=":"+u)}}var n="",r=this.getFunctionName(),o=!0,s=this.isConstructor(),a=!(this.isToplevel()||s);if(a){var c=this.getTypeName();c==="[object Object]"&&(c="null");var l=this.getMethodName();r?(c&&r.indexOf(c)!=0&&(n+=c+"."),n+=r,l&&r.indexOf("."+l)!=r.length-l.length-1&&(n+=" [as "+l+"]")):n+=c+"."+(l||"<anonymous>")}else s?n+="new "+(r||"<anonymous>"):r?n+=r:(n+=e,o=!1);return o&&(n+=" ("+e+")"),n}function Qt(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(i){e[i]=/^(?:is|get)/.test(i)?function(){return t[i].call(t)}:t[i]}),e.toString=fn,e}function zt(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var i=t.getFileName()||t.getScriptNameOrSourceURL();if(i){var u=t.getLineNumber(),n=t.getColumnNumber()-1,r=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,o=r.test(sn())?0:62;u===1&&n>o&&!tt()&&!t.isEval()&&(n-=o);var s=it({source:i,line:u,column:n});e.curPosition=s,t=Qt(t);var a=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?a():e.nextPosition.name||a()},t.getFileName=function(){return s.source},t.getLineNumber=function(){return s.line},t.getColumnNumber=function(){return s.column+1},t.getScriptNameOrSourceURL=function(){return s.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=Kt(c),t=Qt(t),t.getEvalOrigin=function(){return c}),t}function dn(t,e){Ze&&(K={},oe={});for(var i=t.name||"Error",u=t.message||"",n=i+": "+u,r={nextPosition:null,curPosition:null},o=[],s=e.length-1;s>=0;s--)o.push(`
    at `+zt(e[s],r)),r.nextPosition=r.curPosition;return r.curPosition=r.nextPosition=null,n+o.reverse().join("")}function Wt(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var i=e[1],u=+e[2],n=+e[3],r=K[i];if(!r&&N&&N.existsSync(i))try{r=N.readFileSync(i,"utf8")}catch{r=""}if(r){var o=r.split(/(?:\r\n|\r|\n)/)[u-1];if(o)return i+":"+u+`
`+o+`
`+new Array(n).join(" ")+"^"}}return null}function mn(t){var e=Wt(t),i=an();i&&i._handle&&i._handle.setBlocking&&i._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),ln(1)}function pn(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var i=arguments[1]&&arguments[1].stack,u=this.listeners(e).length>0;if(i&&!u)return mn(arguments[1])}return t.apply(this,arguments)}}var hn=G.slice(0),gn=F.slice(0);z.wrapCallSite=zt;z.getErrorSource=Wt;z.mapSourcePosition=it;z.retrieveSourceMap=nt;z.install=function(t){if(t=t||{},t.environment&&(ie=t.environment,["node","browser","auto"].indexOf(ie)===-1))throw new Error("environment "+ie+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(G.length=0),G.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(F.length=0),F.unshift(t.retrieveSourceMap)),t.hookRequire&&!tt()){var e=Gt(et,"module"),i=e.prototype._compile;i.__sourceMapSupport||(e.prototype._compile=function(r,o){return K[o]=r,oe[o]=void 0,i.call(this,r,o)},e.prototype._compile.__sourceMapSupport=!0)}if(Ze||(Ze="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Ft||(Ft=!0,Error.prepareStackTrace=dn),!Vt){var u="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var n=Gt(et,"worker_threads");n.isMainThread===!1&&(u=!1)}catch{}u&&un()&&(Vt=!0,pn())}};z.resetRetrieveHandlers=function(){G.length=0,F.length=0,G=hn.slice(0),F=gn.slice(0),nt=ve(F),rt=ve(G)}});var ut=_(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.default=yn;var vn=_n(require("crypto"));function _n(t){return t&&t.__esModule?t:{default:t}}var ye=new Uint8Array(256),_e=ye.length;function yn(){return _e>ye.length-16&&(vn.default.randomFillSync(ye),_e=0),ye.slice(_e,_e+=16)}});var $t=_(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=void 0;var En=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ee.default=En});var ue=_(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.default=void 0;var Sn=wn($t());function wn(t){return t&&t.__esModule?t:{default:t}}function bn(t){return typeof t=="string"&&Sn.default.test(t)}var Cn=bn;Se.default=Cn});var se=_(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.default=void 0;var On=An(ue());function An(t){return t&&t.__esModule?t:{default:t}}var C=[];for(let t=0;t<256;++t)C.push((t+256).toString(16).substr(1));function xn(t,e=0){let i=(C[t[e+0]]+C[t[e+1]]+C[t[e+2]]+C[t[e+3]]+"-"+C[t[e+4]]+C[t[e+5]]+"-"+C[t[e+6]]+C[t[e+7]]+"-"+C[t[e+8]]+C[t[e+9]]+"-"+C[t[e+10]]+C[t[e+11]]+C[t[e+12]]+C[t[e+13]]+C[t[e+14]]+C[t[e+15]]).toLowerCase();if(!(0,On.default)(i))throw TypeError("Stringified UUID is invalid");return i}var In=xn;we.default=In});var Xt=_(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.default=void 0;var Rn=Jt(ut()),Mn=Jt(se());function Jt(t){return t&&t.__esModule?t:{default:t}}var Ht,st,at=0,lt=0;function Tn(t,e,i){let u=e&&i||0,n=e||new Array(16);t=t||{};let r=t.node||Ht,o=t.clockseq!==void 0?t.clockseq:st;if(r==null||o==null){let f=t.random||(t.rng||Rn.default)();r==null&&(r=Ht=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=st=(f[6]<<8|f[7])&16383)}let s=t.msecs!==void 0?t.msecs:Date.now(),a=t.nsecs!==void 0?t.nsecs:lt+1,c=s-at+(a-lt)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||s>at)&&t.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");at=s,lt=a,st=o,s+=122192928e5;let l=((s&268435455)*1e4+a)%4294967296;n[u++]=l>>>24&255,n[u++]=l>>>16&255,n[u++]=l>>>8&255,n[u++]=l&255;let d=s/4294967296*1e4&268435455;n[u++]=d>>>8&255,n[u++]=d&255,n[u++]=d>>>24&15|16,n[u++]=d>>>16&255,n[u++]=o>>>8|128,n[u++]=o&255;for(let f=0;f<6;++f)n[u+f]=r[f];return e||(0,Mn.default)(n)}var Ln=Tn;be.default=Ln});var ct=_(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=void 0;var Dn=Nn(ue());function Nn(t){return t&&t.__esModule?t:{default:t}}function Pn(t){if(!(0,Dn.default)(t))throw TypeError("Invalid UUID");let e,i=new Uint8Array(16);return i[0]=(e=parseInt(t.slice(0,8),16))>>>24,i[1]=e>>>16&255,i[2]=e>>>8&255,i[3]=e&255,i[4]=(e=parseInt(t.slice(9,13),16))>>>8,i[5]=e&255,i[6]=(e=parseInt(t.slice(14,18),16))>>>8,i[7]=e&255,i[8]=(e=parseInt(t.slice(19,23),16))>>>8,i[9]=e&255,i[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,i[11]=e/4294967296&255,i[12]=e>>>24&255,i[13]=e>>>16&255,i[14]=e>>>8&255,i[15]=e&255,i}var qn=Pn;Ce.default=qn});var ft=_(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.default=Gn;W.URL=W.DNS=void 0;var Bn=Zt(se()),kn=Zt(ct());function Zt(t){return t&&t.__esModule?t:{default:t}}function Un(t){t=unescape(encodeURIComponent(t));let e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i));return e}var Yt="6ba7b810-9dad-11d1-80b4-00c04fd430c8";W.DNS=Yt;var er="6ba7b811-9dad-11d1-80b4-00c04fd430c8";W.URL=er;function Gn(t,e,i){function u(n,r,o,s){if(typeof n=="string"&&(n=Un(n)),typeof r=="string"&&(r=(0,kn.default)(r)),r.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+n.length);if(a.set(r),a.set(n,r.length),a=i(a),a[6]=a[6]&15|e,a[8]=a[8]&63|128,o){s=s||0;for(let c=0;c<16;++c)o[s+c]=a[c];return o}return(0,Bn.default)(a)}try{u.name=t}catch{}return u.DNS=Yt,u.URL=er,u}});var tr=_(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.default=void 0;var Fn=Vn(require("crypto"));function Vn(t){return t&&t.__esModule?t:{default:t}}function Qn(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Fn.default.createHash("md5").update(t).digest()}var Kn=Qn;Oe.default=Kn});var nr=_(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.default=void 0;var zn=rr(ft()),Wn=rr(tr());function rr(t){return t&&t.__esModule?t:{default:t}}var jn=(0,zn.default)("v3",48,Wn.default),$n=jn;Ae.default=$n});var or=_(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.default=void 0;var Hn=ir(ut()),Jn=ir(se());function ir(t){return t&&t.__esModule?t:{default:t}}function Xn(t,e,i){t=t||{};let u=t.random||(t.rng||Hn.default)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){i=i||0;for(let n=0;n<16;++n)e[i+n]=u[n];return e}return(0,Jn.default)(u)}var Zn=Xn;xe.default=Zn});var ur=_(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.default=void 0;var Yn=ei(require("crypto"));function ei(t){return t&&t.__esModule?t:{default:t}}function ti(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Yn.default.createHash("sha1").update(t).digest()}var ri=ti;Ie.default=ri});var ar=_(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.default=void 0;var ni=sr(ft()),ii=sr(ur());function sr(t){return t&&t.__esModule?t:{default:t}}var oi=(0,ni.default)("v5",80,ii.default),ui=oi;Re.default=ui});var lr=_(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.default=void 0;var si="00000000-0000-0000-0000-000000000000";Me.default=si});var cr=_(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.default=void 0;var ai=li(ue());function li(t){return t&&t.__esModule?t:{default:t}}function ci(t){if(!(0,ai.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var fi=ci;Te.default=fi});var fr=_(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});Object.defineProperty(D,"v1",{enumerable:!0,get:function(){return di.default}});Object.defineProperty(D,"v3",{enumerable:!0,get:function(){return mi.default}});Object.defineProperty(D,"v4",{enumerable:!0,get:function(){return pi.default}});Object.defineProperty(D,"v5",{enumerable:!0,get:function(){return hi.default}});Object.defineProperty(D,"NIL",{enumerable:!0,get:function(){return gi.default}});Object.defineProperty(D,"version",{enumerable:!0,get:function(){return vi.default}});Object.defineProperty(D,"validate",{enumerable:!0,get:function(){return _i.default}});Object.defineProperty(D,"stringify",{enumerable:!0,get:function(){return yi.default}});Object.defineProperty(D,"parse",{enumerable:!0,get:function(){return Ei.default}});var di=U(Xt()),mi=U(nr()),pi=U(or()),hi=U(ar()),gi=U(lr()),vi=U(cr()),_i=U(ue()),yi=U(se()),Ei=U(ct());function U(t){return t&&t.__esModule?t:{default:t}}});var mr=_((Ne,dt)=>{(function(t,e,i){"use strict";var u=function(r,o,s){s=n.extend({},n.options,s);var a=n.runValidations(r,o,s),c,l;if(a.some(function(d){return n.isPromise(d.error)}))throw new Error("Use validate.async if you want support for promises");return u.processValidationResults(a,s)},n=u;n.extend=function(r){return[].slice.call(arguments,1).forEach(function(o){for(var s in o)r[s]=o[s]}),r},n.extend(u,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var r=n.format("%{major}.%{minor}.%{patch}",n.version);return n.isEmpty(n.version.metadata)||(r+="+"+n.version.metadata),r}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(r,o,s){var a=[],c,l,d,f,m,h,v;(n.isDomElement(r)||n.isJqueryElement(r))&&(r=n.collectFormValues(r));for(c in o){d=n.getDeepObjectValue(r,c),f=n.result(o[c],d,r,c,s,o);for(l in f){if(m=n.validators[l],!m)throw v=n.format("Unknown validator %{name}",{name:l}),new Error(v);h=f[l],h=n.result(h,d,r,c,s,o),h&&a.push({attribute:c,value:d,validator:l,globalOptions:s,attributes:r,options:h,error:m.call(m,d,h,c,r,s)})}}return a},processValidationResults:function(r,o){r=n.pruneEmptyErrors(r,o),r=n.expandMultipleErrors(r,o),r=n.convertErrorMessages(r,o);var s=o.format||"grouped";if(typeof n.formatters[s]=="function")r=n.formatters[s](r);else throw new Error(n.format("Unknown format %{format}",o));return n.isEmpty(r)?void 0:r},async:function(r,o,s){s=n.extend({},n.async.options,s);var a=s.wrapErrors||function(l){return l};s.cleanAttributes!==!1&&(r=n.cleanAttributes(r,o));var c=n.runValidations(r,o,s);return new n.Promise(function(l,d){n.waitForResults(c).then(function(){var f=n.processValidationResults(c,s);f?d(new a(f,s,r,o)):l(r)},function(f){d(f)})})},single:function(r,o,s){return s=n.extend({},n.single.options,s,{format:"flat",fullMessages:!1}),n({single:r},{single:o},s)},waitForResults:function(r){return r.reduce(function(o,s){return n.isPromise(s.error)?o.then(function(){return s.error.then(function(a){s.error=a||null})}):o},new n.Promise(function(o){o()}))},result:function(r){var o=[].slice.call(arguments,1);return typeof r=="function"&&(r=r.apply(null,o)),r},isNumber:function(r){return typeof r=="number"&&!isNaN(r)},isFunction:function(r){return typeof r=="function"},isInteger:function(r){return n.isNumber(r)&&r%1===0},isBoolean:function(r){return typeof r=="boolean"},isObject:function(r){return r===Object(r)},isDate:function(r){return r instanceof Date},isDefined:function(r){return r!=null},isPromise:function(r){return!!r&&n.isFunction(r.then)},isJqueryElement:function(r){return r&&n.isString(r.jquery)},isDomElement:function(r){return!r||!r.querySelectorAll||!r.querySelector?!1:n.isObject(document)&&r===document?!0:typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r!==null&&r.nodeType===1&&typeof r.nodeName=="string"},isEmpty:function(r){var o;if(!n.isDefined(r))return!0;if(n.isFunction(r))return!1;if(n.isString(r))return n.EMPTY_STRING_REGEXP.test(r);if(n.isArray(r))return r.length===0;if(n.isDate(r))return!1;if(n.isObject(r)){for(o in r)return!1;return!0}return!1},format:n.extend(function(r,o){return n.isString(r)?r.replace(n.format.FORMAT_REGEXP,function(s,a,c){return a==="%"?"%{"+c+"}":String(o[c])}):r},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(r){return n.isNumber(r)?r*100%1===0?""+r:parseFloat(Math.round(r*100)/100).toFixed(2):n.isArray(r)?r.map(function(o){return n.prettify(o)}).join(", "):n.isObject(r)?n.isDefined(r.toString)?r.toString():JSON.stringify(r):(r=""+r,r.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(o,s,a){return""+s+" "+a.toLowerCase()}).toLowerCase())},stringifyValue:function(r,o){var s=o&&o.prettify||n.prettify;return s(r)},isString:function(r){return typeof r=="string"},isArray:function(r){return{}.toString.call(r)==="[object Array]"},isHash:function(r){return n.isObject(r)&&!n.isArray(r)&&!n.isFunction(r)},contains:function(r,o){return n.isDefined(r)?n.isArray(r)?r.indexOf(o)!==-1:o in r:!1},unique:function(r){return n.isArray(r)?r.filter(function(o,s,a){return a.indexOf(o)==s}):r},forEachKeyInKeypath:function(r,o,s){if(!!n.isString(o)){var a="",c,l=!1;for(c=0;c<o.length;++c)switch(o[c]){case".":l?(l=!1,a+="."):(r=s(r,a,!1),a="");break;case"\\":l?(l=!1,a+="\\"):l=!0;break;default:l=!1,a+=o[c];break}return s(r,a,!0)}},getDeepObjectValue:function(r,o){if(!!n.isObject(r))return n.forEachKeyInKeypath(r,o,function(s,a){if(n.isObject(s))return s[a]})},collectFormValues:function(r,o){var s={},a,c,l,d,f,m;if(n.isJqueryElement(r)&&(r=r[0]),!r)return s;for(o=o||{},d=r.querySelectorAll("input[name], textarea[name]"),a=0;a<d.length;++a)if(l=d.item(a),!n.isDefined(l.getAttribute("data-ignored"))){var h=l.name.replace(/\./g,"\\\\.");m=n.sanitizeFormValue(l.value,o),l.type==="number"?m=m?+m:null:l.type==="checkbox"?l.attributes.value?l.checked||(m=s[h]||null):m=l.checked:l.type==="radio"&&(l.checked||(m=s[h]||null)),s[h]=m}for(d=r.querySelectorAll("select[name]"),a=0;a<d.length;++a)if(l=d.item(a),!n.isDefined(l.getAttribute("data-ignored"))){if(l.multiple){m=[];for(c in l.options)f=l.options[c],f&&f.selected&&m.push(n.sanitizeFormValue(f.value,o))}else{var v=typeof l.options[l.selectedIndex]<"u"?l.options[l.selectedIndex].value:"";m=n.sanitizeFormValue(v,o)}s[l.name]=m}return s},sanitizeFormValue:function(r,o){return o.trim&&n.isString(r)&&(r=r.trim()),o.nullify!==!1&&r===""?null:r},capitalize:function(r){return n.isString(r)?r[0].toUpperCase()+r.slice(1):r},pruneEmptyErrors:function(r){return r.filter(function(o){return!n.isEmpty(o.error)})},expandMultipleErrors:function(r){var o=[];return r.forEach(function(s){n.isArray(s.error)?s.error.forEach(function(a){o.push(n.extend({},s,{error:a}))}):o.push(s)}),o},convertErrorMessages:function(r,o){o=o||{};var s=[],a=o.prettify||n.prettify;return r.forEach(function(c){var l=n.result(c.error,c.value,c.attribute,c.options,c.attributes,c.globalOptions);if(!n.isString(l)){s.push(c);return}l[0]==="^"?l=l.slice(1):o.fullMessages!==!1&&(l=n.capitalize(a(c.attribute))+" "+l),l=l.replace(/\\\^/g,"^"),l=n.format(l,{value:n.stringifyValue(c.value,o)}),s.push(n.extend({},c,{error:l}))}),s},groupErrorsByAttribute:function(r){var o={};return r.forEach(function(s){var a=o[s.attribute];a?a.push(s):o[s.attribute]=[s]}),o},flattenErrorsToArray:function(r){return r.map(function(o){return o.error}).filter(function(o,s,a){return a.indexOf(o)===s})},cleanAttributes:function(r,o){function s(l,d,f){return n.isObject(l[d])?l[d]:l[d]=f?!0:{}}function a(l){var d={},f,m;for(m in l)!l[m]||n.forEachKeyInKeypath(d,m,s);return d}function c(l,d){if(!n.isObject(l))return l;var f=n.extend({},l),m,h;for(h in l)m=d[h],n.isObject(m)?f[h]=c(f[h],m):m||delete f[h];return f}return!n.isObject(o)||!n.isObject(r)?{}:(o=a(o),c(r,o))},exposeModule:function(r,o,s,a,c){s?(a&&a.exports&&(s=a.exports=r),s.validate=r):(o.validate=r,r.isFunction(c)&&c.amd&&c([],function(){return r}))},warn:function(r){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+r)},error:function(r){typeof console<"u"&&console.error&&console.error("[validate.js] "+r)}}),u.validators={presence:function(r,o){if(o=n.extend({},this.options,o),o.allowEmpty!==!1?!n.isDefined(r):n.isEmpty(r))return o.message||this.message||"can't be blank"},length:function(r,o,s){if(!!n.isDefined(r)){o=n.extend({},this.options,o);var a=o.is,c=o.maximum,l=o.minimum,d=o.tokenizer||function(v){return v},f,m=[];r=d(r);var h=r.length;if(!n.isNumber(h))return o.message||this.notValid||"has an incorrect length";if(n.isNumber(a)&&h!==a&&(f=o.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",m.push(n.format(f,{count:a}))),n.isNumber(l)&&h<l&&(f=o.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",m.push(n.format(f,{count:l}))),n.isNumber(c)&&h>c&&(f=o.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",m.push(n.format(f,{count:c}))),m.length>0)return o.message||m}},numericality:function(r,o,s,a,c){if(!!n.isDefined(r)){o=n.extend({},this.options,o);var l=[],d,f,m={greaterThan:function(w,x){return w>x},greaterThanOrEqualTo:function(w,x){return w>=x},equalTo:function(w,x){return w===x},lessThan:function(w,x){return w<x},lessThanOrEqualTo:function(w,x){return w<=x},divisibleBy:function(w,x){return w%x===0}},h=o.prettify||c&&c.prettify||n.prettify;if(n.isString(r)&&o.strict){var v="^-?(0|[1-9]\\d*)";if(o.onlyInteger||(v+="(\\.\\d+)?"),v+="$",!new RegExp(v).test(r))return o.message||o.notValid||this.notValid||this.message||"must be a valid number"}if(o.noStrings!==!0&&n.isString(r)&&!n.isEmpty(r)&&(r=+r),!n.isNumber(r))return o.message||o.notValid||this.notValid||this.message||"is not a number";if(o.onlyInteger&&!n.isInteger(r))return o.message||o.notInteger||this.notInteger||this.message||"must be an integer";for(d in m)if(f=o[d],n.isNumber(f)&&!m[d](r,f)){var B="not"+n.capitalize(d),S=o[B]||this[B]||this.message||"must be %{type} %{count}";l.push(n.format(S,{count:f,type:h(d)}))}if(o.odd&&r%2!==1&&l.push(o.notOdd||this.notOdd||this.message||"must be odd"),o.even&&r%2!==0&&l.push(o.notEven||this.notEven||this.message||"must be even"),l.length)return o.message||l}},datetime:n.extend(function(r,o){if(!n.isFunction(this.parse)||!n.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(!!n.isDefined(r)){o=n.extend({},this.options,o);var s,a=[],c=o.earliest?this.parse(o.earliest,o):NaN,l=o.latest?this.parse(o.latest,o):NaN;if(r=this.parse(r,o),isNaN(r)||o.dateOnly&&r%864e5!==0)return s=o.notValid||o.message||this.notValid||"must be a valid date",n.format(s,{value:arguments[0]});if(!isNaN(c)&&r<c&&(s=o.tooEarly||o.message||this.tooEarly||"must be no earlier than %{date}",s=n.format(s,{value:this.format(r,o),date:this.format(c,o)}),a.push(s)),!isNaN(l)&&r>l&&(s=o.tooLate||o.message||this.tooLate||"must be no later than %{date}",s=n.format(s,{date:this.format(l,o),value:this.format(r,o)}),a.push(s)),a.length)return n.unique(a)}},{parse:null,format:null}),date:function(r,o){return o=n.extend({},o,{dateOnly:!0}),n.validators.datetime.call(n.validators.datetime,r,o)},format:function(r,o){(n.isString(o)||o instanceof RegExp)&&(o={pattern:o}),o=n.extend({},this.options,o);var s=o.message||this.message||"is invalid",a=o.pattern,c;if(!!n.isDefined(r)&&(!n.isString(r)||(n.isString(a)&&(a=new RegExp(o.pattern,o.flags)),c=a.exec(r),!c||c[0].length!=r.length)))return s},inclusion:function(r,o){if(!!n.isDefined(r)&&(n.isArray(o)&&(o={within:o}),o=n.extend({},this.options,o),!n.contains(o.within,r))){var s=o.message||this.message||"^%{value} is not included in the list";return n.format(s,{value:r})}},exclusion:function(r,o){if(!!n.isDefined(r)&&(n.isArray(o)&&(o={within:o}),o=n.extend({},this.options,o),!!n.contains(o.within,r))){var s=o.message||this.message||"^%{value} is restricted";return n.isString(o.within[r])&&(r=o.within[r]),n.format(s,{value:r})}},email:n.extend(function(r,o){o=n.extend({},this.options,o);var s=o.message||this.message||"is not a valid email";if(!!n.isDefined(r)&&(!n.isString(r)||!this.PATTERN.exec(r)))return s},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(r,o,s,a,c){if(!!n.isDefined(r)){n.isString(o)&&(o={attribute:o}),o=n.extend({},this.options,o);var l=o.message||this.message||"is not equal to %{attribute}";if(n.isEmpty(o.attribute)||!n.isString(o.attribute))throw new Error("The attribute must be a non empty string");var d=n.getDeepObjectValue(a,o.attribute),f=o.comparator||function(h,v){return h===v},m=o.prettify||c&&c.prettify||n.prettify;if(!f(r,d,o,s,a))return n.format(l,{attribute:m(o.attribute)})}},url:function(r,o){if(!!n.isDefined(r)){o=n.extend({},this.options,o);var s=o.message||this.message||"is not a valid url",a=o.schemes||this.schemes||["http","https"],c=o.allowLocal||this.allowLocal||!1,l=o.allowDataUrl||this.allowDataUrl||!1;if(!n.isString(r))return s;var d="^(?:(?:"+a.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",f="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?f+="?":d+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",d+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+f+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",l){var m="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",h="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",v="data:(?:"+m+")?(?:;base64)?,"+h;d="(?:"+d+")|(?:^"+v+"$)"}var B=new RegExp(d,"i");if(!B.exec(r))return s}},type:n.extend(function(r,o,s,a,c){if(n.isString(o)&&(o={type:o}),!!n.isDefined(r)){var l=n.extend({},this.options,o),d=l.type;if(!n.isDefined(d))throw new Error("No type was specified");var f;if(n.isFunction(d)?f=d:f=this.types[d],!n.isFunction(f))throw new Error("validate.validators.type.types."+d+" must be a function.");if(!f(r,l,s,a,c)){var m=o.message||this.messages[d]||this.message||l.message||(n.isFunction(d)?"must be of the correct type":"must be of type %{type}");return n.isFunction(m)&&(m=m(r,o,s,a,c)),n.format(m,{attribute:n.prettify(s),type:d})}}},{types:{object:function(r){return n.isObject(r)&&!n.isArray(r)},array:n.isArray,integer:n.isInteger,number:n.isNumber,string:n.isString,date:n.isDate,boolean:n.isBoolean},messages:{}})},u.formatters={detailed:function(r){return r},flat:n.flattenErrorsToArray,grouped:function(r){var o;r=n.groupErrorsByAttribute(r);for(o in r)r[o]=n.flattenErrorsToArray(r[o]);return r},constraint:function(r){var o;r=n.groupErrorsByAttribute(r);for(o in r)r[o]=r[o].map(function(s){return s.validator}).sort();return r}},u.exposeModule(u,this,t,e,i)}).call(Ne,typeof Ne<"u"?Ne:null,typeof dt<"u"?dt:null,typeof define<"u"?define:null)});var Di={};Mr(Di,{createBook:()=>vr,createComment:()=>Cr,deleteBook:()=>_r,getAllBooks:()=>Er,getBook:()=>yr,updateBook:()=>wr});module.exports=Tr(Di);jt().install();var P=qe(fr(),1),ao=P.default.v1,lo=P.default.v3,Le=P.default.v4,co=P.default.v5,fo=P.default.NIL,mo=P.default.version,po=P.default.validate,ho=P.default.stringify,go=P.default.parse;var ae=class{constructor(e){this._id=Le(),this._title=e.title,this._author=e.author,this._readAt=e.readAt}set id(e){this._id=e}get id(){return this._id}set title(e){this._title=e}get title(){return this._title}set author(e){this._author=e}get author(){return this._author}set readAt(e){this._readAt=e}get readAt(){return this._readAt}toEntityMappings(){return{id:this.id,title:this.title,author:this.author,readAt:this.readAt,timestamp:new Date().getTime()}}};var Si={200:"success",201:"success",204:"success",400:"bad request",404:"bad request",500:"error"},wi={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},g=class{constructor(e={},i=402,u=""){this.code=i;this.setBodyVariable=(e,i)=>{this.body[e]=i};this.generate=()=>({statusCode:this.code,headers:wi,body:JSON.stringify(this.body)});this.body={data:e,message:u,status:Si[i]},this.code=i}get message(){return this.body.message}get data(){return this.body.data}};var De=qe(require("aws-sdk"));var{STAGE:dr}=process.env,le={region:"ap-northeast-1"};dr==="dev"?(le.accessKeyId="dummy",le.secretAccessKey="dummy",le.endpoint="http://localhost:8008",console.log("dynamodb-local mode",le)):console.log("running dynamodb on aws on",dr);De.config.update(le);var j=new De.DynamoDB.DocumentClient,A=class{constructor(){this.getItem=async({key:e,hash:i,hashValue:u,tableName:n})=>{let r={TableName:n,Key:{id:e}};i&&(r.Key[i]=u);let o=await this.get(r);if(Object.keys(o).length)return o;throw console.log("item does not exist"),new g({id:e},404,"Item does not exist")};this.existsItem=async({key:e,hash:i,hashValue:u,tableName:n})=>{try{return await this.getItem({key:e,hash:i,hashValue:u,tableName:n}),!0}catch(r){if(r instanceof g)return r.code!==404;throw r}};this.create=async e=>{try{return await j.put(e).promise()}catch(i){throw console.error("create-error",i),new g({},500,`create-error: ${i}`)}};this.batchCreate=async e=>{try{return await j.batchWrite(e).promise()}catch(i){throw new g({},500,`batch-write-error: ${i}`)}};this.update=async e=>{try{return await j.update(e).promise()}catch(i){throw new g({},500,`update-error: ${i}`)}};this.query=async e=>{try{return await j.query(e).promise()}catch(i){throw new g({},500,`query-error: ${i}`)}};this.scan=async e=>{try{return await j.scan(e).promise()}catch(i){throw new g({},500,`query-error: ${i}`)}};this.get=async e=>{try{return await j.get(e).promise()}catch(i){throw new g({},500,`get-error: ${i}`)}};this.delete=async e=>{try{return await j.delete(e).promise()}catch(i){throw new g({},500,`delete-error: ${i}`)}}}};var pr=qe(mr());var q=(t,e)=>new Promise((i,u)=>{let n=(0,pr.default)(t,e);typeof n>"u"?i(t):u(new g({validation:n},400,"required fields are missing"))}),hr=(t,e)=>{let i=[],u=0;for(;u<t.length;)i.push(t.slice(u,u+=e));return i},M=()=>{let{BOOK_TABLE:t,COMMENTS_TABLE:e}=process.env;return{bookTable:t??"unknown-book-table",commentsTable:e??"unknown-comments-table"}};var gr={title:{presence:{allowEmpty:!1,type:"string"}},author:{presence:{allowEmpty:!1,type:"string"}}};var T=t=>async(e,i)=>{let u=e.body?JSON.parse(e.body):void 0,n=Object.keys(e.queryStringParameters||{}).reduce((o,s)=>{var a;return o[s]=(a=e.queryStringParameters)==null?void 0:a[s],o},{});return(await t(u,n,i)).generate()};var Ci=async t=>{try{await q(t,gr);let e=new A,u=new ae(t).toEntityMappings(),n={TableName:M().bookTable,Item:{id:u.id,title:u.title,author:u.author,readAt:u.readAt}};return await e.create(n),new g({book:u},201,"To-do book successfully created")}catch(e){return e instanceof g?e:new g({},500,"To-do book cannot be created")}},vr=T(Ci);var Pe={bookId:{presence:{allowEmpty:!1},type:"string"}};var Ai=async(t,e)=>{var r;let{bookTable:i,commentsTable:u}=M(),n=new A;try{await q(e,Pe);let{bookId:o}=e;if(!await n.existsItem({key:o,tableName:i}))return new g({},204,"To-do book has already been deleted");let a={TableName:i,Key:{id:o}};await n.delete(a);let c={TableName:u,IndexName:"book_index",KeyConditionExpression:"bookId = :bookIdVal",ExpressionAttributeValues:{":bookIdVal":o}},l=await n.query(c);if((l==null?void 0:l.Items)&&(l==null?void 0:l.Items.length)){let d=(r=l==null?void 0:l.Items)==null?void 0:r.map(f=>({DeleteRequest:{Key:{id:f.id,bookId:f.bookId}}}));if(d.length>25){let f=hr(d,25);await Promise.all(f.map(m=>n.batchCreate({RequestItems:{[u]:m}})))}else await n.batchCreate({RequestItems:{[u]:d}})}return new g({},204,"To-do book successfully deleted")}catch(o){return o instanceof g?o:new g({},500,"To-do book cannot be deleted")}},_r=T(Ai);var xi=async(t,e)=>{var r;let i=new A,{bookTable:u,commentsTable:n}=M();try{await q(e,Pe);let{bookId:o}=e,s=await i.getItem({key:o,tableName:u}),a={TableName:n,IndexName:"book_index",KeyConditionExpression:"bookId = :bookIdVal",ExpressionAttributeValues:{":bookIdVal":o}},c=await i.query(a),l=(r=c==null?void 0:c.Items)==null?void 0:r.map(d=>({id:d.id,comment:d.comment,commentAt:d.commentAt}));return new g({...s.Item,commentCount:l==null?void 0:l.length,comments:l},200,"To-do book successfully retrieved")}catch(o){return o instanceof g?o:new g({},500,"To-do book not found")}},yr=T(xi);var Ii=async t=>{let e=new A,{bookTable:i}=M();try{let u={TableName:i},n=await e.scan(u);return new g({books:n.Items},200,"To-do book successfully retrieved")}catch(u){return u instanceof g?u:new g({},500,"To-do book not found")}},Er=T(Ii);var Sr={bookId:{presence:{allowEmpty:!1},type:"string"},name:{presence:{allowEmpty:!1},type:"string"}};var Mi=async t=>{let e=new A,{bookTable:i}=M(),{bookId:u,name:n}=t;try{await Promise.all([q(t,Sr),e.getItem({key:u,tableName:i})]);let r={TableName:i,Key:{id:u},UpdateExpression:"set #name = :name, updatedAt = :timestamp",ExpressionAttributeNames:{"#name":"name"},ExpressionAttributeValues:{":name":n,":timestamp":new Date().getTime()},ReturnValues:"UPDATED_NEW"},o=await e.update(r);return new g({...o.Attributes},200,"To-do book successfully updated")}catch(r){return r instanceof g?r:new g({},500,"To-do book cannot be updated")}},wr=T(Mi);var ce=class{constructor(e){this._id=e.id||Le(),this._bookId=e.bookId,this._comment=e.comment,this._commentAt=e.commentAt||new Date().getTime()}get id(){return this._id}set bookId(e){this._bookId=e}get bookId(){return this._bookId}set comment(e){this._comment=e}get comment(){return this._comment}set commentAt(e){this._commentAt=e}get commentAt(){return this._commentAt}toEntityMapping(){return{id:this.id,bookId:this.bookId,comment:this.comment,commentAt:this.commentAt}}};var br={bookId:{presence:{allowEmpty:!1},type:"string"},comment:{presence:{allowEmpty:!1},type:"string"}};var Li=async t=>{let e=new A,{bookTable:i,commentsTable:u}=M();try{await Promise.all([q(t,br),e.getItem({key:t.bookId,tableName:i})]);let r=new ce(t).toEntityMapping(),o={TableName:u,Item:{id:r.id,bookId:r.bookId,comment:r.comment}};return await e.create(o),new g({taskId:r.id},201,"Comment successfully added")}catch(n){return n instanceof g?n:new g({},500,"Comment could not be added")}},Cr=T(Li);0&&(module.exports={createBook,createComment,deleteBook,getAllBooks,getBook,updateBook});
/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
//# sourceMappingURL=handler.js.map
